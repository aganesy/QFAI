# pnpm lifecycle script 許可（allowlist）運用ガイド

## 目的

pnpm 環境で表示される `Ignored build scripts: ...` に対し、依存パッケージのビルドスクリプトを
**安全に許可するための運用手順**を提示します。これは QFAI の validate 対象外です。

## 典型的な事象

- `Ignored build scripts: esbuild` などの警告が表示される

## 影響例

- ビルド済み成果物が生成されず、実行時エラーや動作不整合が起きる
- ローカルは動くが CI で失敗するなど、環境差分が発生する

## 最小運用フロー（例）

1. 警告に出た依存を特定する（lockfile/依存ツリーで確認）
2. 依存の出所・信頼性を確認する（公式パッケージ/署名/公開元など）
3. チームで許可判断を行う（承認者・記録方法を決める）
4. pnpm の設定（例: `onlyBuiltDependencies` など）を更新し、許可対象を管理する
5. 変更内容を記録し、再現可能性を担保する（README/CHANGELOG など）

## 注意

- pnpm のバージョンや設定により手順が変わる場合があります。
- 実際のコマンドやオプションは **pnpm の公式ドキュメント**を参照してください。
- allowlist の判断は各プロジェクトのセキュリティ方針に従ってください。
